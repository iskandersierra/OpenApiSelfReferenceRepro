# OpenApiSelfReferenceRepro

In this sample repro, OpenAPI v9.0.4 is unable to represent self-referencing schemas correctly.

The models are the following:

```csharp
public class Level1
{
    public IReadOnlyList<Level1> Level1s { get; set; } = [];
}
```

And the Controller code is:

```csharp
[ApiController]
[Route("[controller]")]
public class LevelController : ControllerBase
{
    [HttpGet(Name = "GetLevels")]
    public IReadOnlyList<Level1> GetLevels()
    {
        return new();
    }
}
```

However the schemas generated by OpenAPI are not correct. The expected schema for `LevelResponse` should be:

```json
{
    "Level1": {
        "type": "object",
        "properties": {
            "level1s": {
                "type": "array",
                "items": { } // <-- should be: { "$ref": "#/components/schemas/Level1" }
            }
        }
    }
}
```

Some facts: 

- It doesn't matter which type of collection we return in the controller, the issue is always the same.
- If the controller returns `Level1` instead of `IReadOnlyList<Level1>`, the schema is generated correctly.`
- If there is a second action returning the `Level1` type, the schema gets the `Level1` duplicated as `Level12`, one gets generated correctly and the other one incorrectly, depending on the order of the actions in the controller.
